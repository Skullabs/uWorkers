package {{packageName}};

{{#name}}
@trip.spi.Name( "{{.}}" )
{{/name}}
@trip.spi.Service( uworkers.api.Consumer.class )
@uworkers.api.Autostart
public class {{typeName}}AutoGenerated{{consumerName}}{{consumerMethod}} extends uworkers.core.AbstractSubscriber<{{type}}> {

	@trip.spi.Provided trip.spi.ServiceProvider provider;
	@trip.spi.Provided uworkers.core.endpoint.MQProvider mqProvider;
	String endpointName = "{{{endpointName}}}";

	public void handle( {{type}} context ) throws uworkers.api.WorkerException {
		try {
			final {{consumer}} consumer = new {{consumer}}();
			provider.provideOn( consumer );
			consumer.{{consumerMethod}}( context );
		} catch( Throwable cause ) {
			throw new uworkers.api.WorkerException( cause );
		}
	}

	public String endpointName() {
		return endpointName;
	}
	
	public Class<T> getExpectedObjectClass() {
	  return {{type}}.class;
  	}

	public uworkers.core.AbstractSubscriber<{{type}}> endpointName( String endpointName ) {
		this.endpointName = endpointName;
		return this;
	}

	protected uworkers.core.endpoint.MQProvider mqProvider() {
		return mqProvider;
	}
}